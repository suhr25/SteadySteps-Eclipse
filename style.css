/* --- 1. CORE VARIABLES --- */
:root {
    --bg-dark: #030407;
    --glass-bg: rgba(20, 25, 35, 0.7);
    --glass-border: rgba(255, 255, 255, 0.08);
    --neon-blue: #00f3ff;
    --neon-purple: #bc13fe;
    --neon-green: #0aff68;
    --neon-orange: #ff9e00;
    --danger: #ff2a6d;
    --text-main: #ffffff;
    --text-muted: #8b9bb4;
    --font-main: 'Outfit', sans-serif;
    --font-mono: 'Space Mono', monospace;
    --gradient-primary: linear-gradient(135deg, #00f3ff 0%, #bc13fe 100%);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body, html {
    background-color: var(--bg-dark);
    color: var(--text-main);
    font-family: var(--font-main);
    height: 100%;
    width: 100%;
    overflow: hidden; /* Fix body scroll */
}

/* --- 2. LAYOUT --- */
#app-screen { 
    display: flex; 
    width: 100%; 
    height: 100%; 
    position: relative; 
    overflow: hidden; /* Critical for layout stability */
}

.sidebar {
    width: 280px; 
    background: rgba(5, 7, 10, 0.95); 
    border-right: 1px solid var(--glass-border);
    display: flex; 
    flex-direction: column; 
    padding: 35px 25px; 
    z-index: 100; 
    flex-shrink: 0;
    backdrop-filter: blur(20px); 
    transition: transform 0.3s ease;
}

.main-wrapper {
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    height: 100%; 
    width: 100%; 
    position: relative;
    background-image: 
        radial-gradient(circle at 15% 50%, rgba(188, 19, 254, 0.05), transparent 40%),
        radial-gradient(circle at 85% 30%, rgba(0, 243, 255, 0.05), transparent 40%);
    min-width: 0; /* Flexbox overflow fix */
}

header {
    height: 90px; 
    padding: 0 40px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    flex-shrink: 0;
    border-bottom: 1px solid var(--glass-border);
    background: rgba(5, 5, 5, 0.3);
    backdrop-filter: blur(10px);
}

.content-scroll { 
    flex: 1; 
    overflow-y: auto; 
    padding: 30px 40px; 
    scroll-behavior: smooth;
    min-height: 0; /* Flexbox scrolling fix */
}
.content-scroll::-webkit-scrollbar { width: 6px; }
.content-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 3px; }

/* --- 3. COMPONENTS & CARDS --- */
.glass-card {
    background: var(--glass-bg); 
    border: 1px solid var(--glass-border); 
    border-radius: 24px;
    box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
    backdrop-filter: blur(24px);
    transition: 0.3s ease;
}

/* Sidebar Elements */
.brand { display: flex; align-items: center; gap: 15px; margin-bottom: 50px; }
.brand-logo { width: 40px; height: 40px; background: var(--gradient-primary); border-radius: 12px; display: flex; justify-content: center; align-items: center; color: white; font-size: 1.2rem; box-shadow: 0 0 20px rgba(0, 243, 255, 0.3); }
.brand-name { font-weight: 700; font-size: 1.2rem; letter-spacing: 1px; }

.nav-links { display: flex; flex-direction: column; gap: 10px; }
.nav-item {
    padding: 16px 20px; border-radius: 16px; cursor: pointer; color: var(--text-muted);
    display: flex; align-items: center; gap: 15px; transition: 0.2s; font-weight: 600; font-size: 0.95rem;
}
.nav-item:hover { background: rgba(255,255,255,0.05); color: white; }
.nav-item.active { background: rgba(0, 243, 255, 0.1); color: var(--neon-blue); border: 1px solid rgba(0, 243, 255, 0.2); }

.sidebar-footer { margin-top: auto; display: flex; flex-direction: column; gap: 10px; }
.zen-btn { color: var(--neon-purple); border: 1px dashed rgba(188, 19, 254, 0.3); justify-content: center; }
.logout-btn { color: var(--danger); justify-content: center; opacity: 0.7; }
.logout-btn:hover { opacity: 1; background: rgba(255, 42, 109, 0.1); }

/* Header Elements */
.header-left { display: flex; align-items: center; gap: 20px; }
.greeting-box h2 { font-size: 1.8rem; font-weight: 700; letter-spacing: -0.5px; }
.status-badge { display: inline-flex; align-items: center; gap: 6px; font-size: 0.75rem; color: var(--neon-green); background: rgba(10, 255, 104, 0.1); padding: 4px 10px; border-radius: 20px; border: 1px solid rgba(10, 255, 104, 0.2); margin-top: 5px; font-weight: 600; }
.dot { width: 6px; height: 6px; background: var(--neon-green); border-radius: 50%; box-shadow: 0 0 8px var(--neon-green); }

.clock-box { text-align: right; }
.time-display { font-size: 1.5rem; font-weight: 700; color: white; text-shadow: 0 0 20px rgba(255,255,255,0.1); }
.live-tag { color: var(--neon-blue); font-size: 0.7rem; letter-spacing: 3px; font-weight: 700; }

/* Dashboard Grid */
.dashboard-grid { 
    display: grid; 
    grid-template-columns: 2.5fr 1fr; /* Wider task area */
    gap: 24px; 
    max-width: 1600px; 
    margin: 0 auto; 
    width: 100%;
}
.main-column, .widget-column { display: flex; flex-direction: column; gap: 24px; }

.section-title { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 0 5px; }
.section-title h3 { font-size: 1.4rem; font-weight: 600; }
.badge-pill { background: rgba(255,255,255,0.1); padding: 6px 14px; border-radius: 30px; font-size: 0.85rem; font-weight: 600; }

/* Command Bar (Task Input) */
.command-bar { padding: 25px; display: flex; flex-direction: column; gap: 20px; position: relative; overflow: hidden; }
.command-bar::before { content:''; position: absolute; left:0; top:0; height:100%; width:4px; background: var(--gradient-primary); }

.command-top { display: flex; gap: 15px; width: 100%; }
.command-top input {
    flex: 1; background: transparent; border: none; font-size: 1.4rem; color: white; outline: none;
    font-family: var(--font-main); border-bottom: 2px solid rgba(255,255,255,0.1); padding-bottom: 12px; transition: 0.3s;
}
.command-top input:focus { border-bottom-color: var(--neon-blue); }
.btn-add {
    width: 50px; height: 50px; border-radius: 14px; border: none; cursor: pointer;
    background: var(--gradient-primary); color: white; font-size: 1.2rem;
    box-shadow: 0 5px 20px rgba(0, 243, 255, 0.4); transition: 0.3s;
}
.btn-add:hover { transform: scale(1.05); filter: brightness(1.2); }

.command-bottom { display: flex; gap: 20px; align-items: center; }
.select-wrapper { position: relative; background: rgba(255,255,255,0.05); border-radius: 10px; padding: 0 12px; border: 1px solid var(--glass-border); }
.select-wrapper select { background: transparent; border: none; color: var(--text-muted); padding: 10px 25px 10px 5px; outline: none; appearance: none; font-family: var(--font-main); font-size: 0.9rem; }
.select-wrapper select option { background: #121212; }
.select-wrapper i { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 0.7rem; pointer-events: none; }

.time-wrapper { display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.05); padding: 8px 15px; border-radius: 10px; border: 1px solid var(--glass-border); }
.time-wrapper input { background: transparent; border: none; color: white; color-scheme: dark; font-family: var(--font-mono); font-size: 0.9rem; outline: none; }
.time-wrapper span { color: var(--text-muted); font-size: 0.8rem; }

/* Task List */
.task-list { list-style: none; display: flex; flex-direction: column; gap: 15px; }
.task-item {
    background: rgba(255,255,255,0.02); padding: 24px; border-radius: 20px; border: 1px solid transparent;
    display: flex; justify-content: space-between; align-items: center; transition: 0.3s; position: relative;
}
.task-item:hover { background: rgba(255,255,255,0.05); transform: translateY(-2px); border-color: rgba(255,255,255,0.1); }
.task-item.active-timer { background: linear-gradient(90deg, rgba(0, 243, 255, 0.05), transparent); border-left: 4px solid var(--neon-blue); }
.task-item.done { opacity: 0.5; text-decoration: line-through; border-color: var(--neon-green); }

.task-meta { display: flex; flex-direction: column; gap: 6px; }
.task-title { font-weight: 700; font-size: 1.15rem; }
.meta-row { display: flex; align-items: center; gap: 12px; font-size: 0.85rem; color: var(--text-muted); }
.cat-tag { text-transform: uppercase; font-weight: 800; font-size: 0.7rem; padding: 3px 8px; border-radius: 6px; letter-spacing: 1px; }
.cat-tag.work { color: var(--neon-blue); background: rgba(0, 243, 255, 0.1); }
.cat-tag.study { color: var(--neon-purple); background: rgba(188, 19, 254, 0.1); }
.cat-tag.health { color: var(--neon-green); background: rgba(10, 255, 104, 0.1); }

.task-controls { display: flex; align-items: center; gap: 12px; }
.ctrl-btn {
    width: 44px; height: 44px; border-radius: 14px; border: 1px solid var(--glass-border);
    background: rgba(255,255,255,0.05); color: white; cursor: pointer; transition: 0.2s;
    display: flex; align-items: center; justify-content: center; font-size: 1rem;
}
.ctrl-btn:hover { background: white; color: black; }
.ctrl-btn.play.active { background: var(--neon-orange); color: black; border-color: var(--neon-orange); animation: pulse 2s infinite; }
.ctrl-btn.check:hover { background: var(--neon-green); color: black; border-color: var(--neon-green); }
.ctrl-btn.del:hover { background: var(--danger); color: white; border-color: var(--danger); }

/* Widgets */
.widget-card { padding: 30px; }
.widget-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.widget-header h4 { font-size: 0.95rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }

.stat-circle-wrapper { display: flex; justify-content: center; align-items: center; position: relative; margin-top: 10px; }
.stat-number { position: absolute; font-size: 2.5rem; font-weight: 700; color: white; }
.progress-ring { transform: rotate(-90deg); }
.bg-ring { fill: none; stroke: rgba(255,255,255,0.1); stroke-width: 8; }
.fg-ring { fill: none; stroke: var(--neon-green); stroke-width: 8; stroke-dasharray: 339.292; stroke-dashoffset: 339.292; transition: stroke-dashoffset 1s ease; stroke-linecap: round; }

/* Toggle Switch */
.toggle-switch input { display: none; }
.toggle-switch label {
    display: block; width: 44px; height: 24px; background: rgba(255,255,255,0.1); border-radius: 20px;
    position: relative; cursor: pointer; transition: 0.3s;
}
.toggle-switch label::after {
    content: ''; position: absolute; left: 3px; top: 3px; width: 18px; height: 18px;
    background: white; border-radius: 50%; transition: 0.3s;
}
.toggle-switch input:checked + label { background: var(--neon-blue); }
.toggle-switch input:checked + label::after { transform: translateX(20px); }

#audio-visuals { display: flex; justify-content: center; gap: 6px; height: 24px; align-items: flex-end; margin-top: 20px; }
.bar { width: 5px; background: var(--neon-blue); animation: equalizer 1s infinite ease-in-out; border-radius: 2px; }
.bar:nth-child(1) { height: 10px; }
.bar:nth-child(2) { animation-delay: 0.2s; height: 15px; }
.bar:nth-child(3) { animation-delay: 0.4s; height: 20px; }
.bar:nth-child(4) { animation-delay: 0.1s; height: 12px; }
@keyframes equalizer { 0% { height: 5px; } 50% { height: 100%; } 100% { height: 5px; } }
.audio-embed iframe { border-radius: 16px; margin-top: 15px; width: 100%; height: 160px; }

/* Analytics */
.analytics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px; }
.chart-card { padding: 30px; }
.chart-card h3 { margin-bottom: 25px; font-size: 1.2rem; font-weight: 600; }
.chart-wrap { position: relative; height: 250px; width: 100%; }
.wide-card { padding: 35px; }
.calendar-wrapper { display: grid; grid-template-columns: repeat(10, 1fr); gap: 8px; margin-top: 25px; }
.cal-day { aspect-ratio: 1; background: rgba(255,255,255,0.03); border-radius: 8px; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.2s; border: 1px solid transparent; }
.cal-day:hover { transform: scale(1.1); background: rgba(255,255,255,0.1); }
.cal-day .date { font-size: 0.75rem; color: var(--text-muted); }
.cal-day .val { font-size: 0.95rem; font-weight: 700; color: white; margin-top: 2px; }
.cal-day.lvl-1 { background: rgba(0, 230, 118, 0.1); color: var(--neon-green); }
.cal-day.lvl-2 { background: rgba(0, 230, 118, 0.3); color: var(--neon-green); border-color: rgba(0, 230, 118, 0.5); }
.cal-day.lvl-3 { background: rgba(0, 230, 118, 0.6); color: white; box-shadow: 0 0 15px rgba(0, 230, 118, 0.4); }

/* AI Planner */
.ai-center { padding: 60px; text-align: center; max-width: 900px; margin: 0 auto; }
.glow-text { font-size: 2.5rem; font-weight: 800; background: var(--gradient-primary); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
.subtext { color: var(--text-muted); font-size: 1.1rem; margin-bottom: 50px; }
.persona-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
.persona-card { background: rgba(255,255,255,0.03); padding: 40px 30px; border-radius: 24px; cursor: pointer; border: 1px solid var(--glass-border); transition: 0.3s; display: flex; flex-direction: column; align-items: center; }
.persona-card:hover { border-color: var(--neon-blue); transform: translateY(-10px); background: rgba(255,255,255,0.06); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
.p-icon { width: 80px; height: 80px; background: rgba(0, 243, 255, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; font-size: 2rem; color: var(--neon-blue); }
.persona-card h3 { font-size: 1.4rem; margin-bottom: 5px; }
.persona-card span { font-size: 0.9rem; color: var(--text-muted); }

/* Zen Mode */
#view-zen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 200; background: #000; display: flex; justify-content: center; align-items: center; }
.zen-bg { position: absolute; top: -10%; left: -10%; width: 120%; height: 120%; background: url('https://images.unsplash.com/photo-1519681393798-3828fb059dce?q=80&w=2070&auto=format&fit=crop') no-repeat center center/cover; filter: brightness(0.4) contrast(1.1); animation: panScenery 60s infinite alternate linear; z-index: -1; }
.zen-ui { position: relative; z-index: 2; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; }
.zen-center { text-align: center; margin-bottom: 50px; }
.zen-clock { font-size: 14vw; font-family: var(--font-mono); font-weight: 700; color: white; text-shadow: 0 0 60px rgba(255,255,255,0.2); line-height: 1; }
.zen-date { font-size: 1.5rem; color: var(--neon-blue); letter-spacing: 8px; text-transform: uppercase; margin-top: 10px; opacity: 0.8; }
.zen-exit { position: absolute; top: 40px; right: 40px; display: flex; align-items: center; gap: 10px; color: rgba(255,255,255,0.5); cursor: pointer; transition: 0.2s; font-weight: 600; font-size: 0.9rem; letter-spacing: 1px; }
.zen-exit:hover { color: white; }

.zen-active-task { background: rgba(0,0,0,0.7); backdrop-filter: blur(30px); padding: 25px 50px; border-radius: 80px; border: 1px solid rgba(255, 158, 0, 0.6); display: flex; align-items: center; gap: 30px; box-shadow: 0 0 50px rgba(255, 158, 0, 0.2); animation: float 6s infinite ease-in-out; min-width: 400px; }
.zen-icon { font-size: 2rem; color: var(--neon-orange); }
.zen-details { display: flex; flex-direction: column; }
.zen-label { font-size: 0.75rem; color: var(--text-muted); letter-spacing: 2px; font-weight: 700; margin-bottom: 5px; }
.zen-task-title { font-size: 1.8rem; font-weight: 700; color: white; }
.zen-timer { font-size: 2.5rem; color: var(--neon-orange); font-weight: 700; margin-left: auto; }
@keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0); } }

/* Auth */
.full-screen { position: fixed; top:0; left:0; width: 100%; height: 100%; z-index: 300; background: var(--bg-dark); display: flex; justify-content: center; align-items: center; }
.auth-box { padding: 60px; text-align: center; width: 450px; }
.logo-text { font-size: 2.5rem; font-weight: 800; background: var(--gradient-primary); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
.input-group { background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 14px; padding: 18px; display: flex; gap: 15px; align-items: center; margin-bottom: 25px; transition: 0.3s; }
.input-group:focus-within { border-color: var(--neon-blue); background: rgba(0, 243, 255, 0.05); }
.input-group i { color: var(--text-muted); font-size: 1.2rem; }
.input-group input { background: transparent; border: none; color: white; width: 100%; outline: none; font-size: 1.1rem; font-family: var(--font-main); }
.btn-primary { width: 100%; padding: 18px; background: var(--gradient-primary); border: none; border-radius: 14px; font-weight: 800; cursor: pointer; font-size: 1rem; letter-spacing: 1px; color: white; transition: 0.3s; box-shadow: 0 5px 20px rgba(188, 19, 254, 0.3); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(188, 19, 254, 0.5); }

/* Common */
.hidden { display: none !important; }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 158, 0, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(255, 158, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 158, 0, 0); } }

/* Mobile */
.mobile-menu-btn, .mobile-close { display: none; font-size: 1.5rem; cursor: pointer; color: white; }
#mobile-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 90; display: none; backdrop-filter: blur(5px); }

@media (max-width: 768px) {
    .sidebar { position: fixed; transform: translateX(-100%); width: 280px; height: 100%; box-shadow: 10px 0 50px rgba(0,0,0,0.8); }
    .sidebar.open { transform: translateX(0); }
    .mobile-menu-btn, .mobile-close { display: block; }
    
    header { height: 70px; padding: 0 20px; }
    .content-scroll { padding: 20px; }
    
    .dashboard-grid { grid-template-columns: 1fr; }
    .analytics-grid, .persona-grid { grid-template-columns: 1fr; }
    .command-top { flex-direction: column; }
    .command-bottom { flex-direction: column; align-items: stretch; }
    .select-wrapper, .time-wrapper { width: 100%; }
    .btn-add { width: 100%; }
    
    .task-item { flex-direction: column; align-items: flex-start; gap: 15px; }
    .task-controls { width: 100%; justify-content: flex-end; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); }
    
    .zen-clock { font-size: 22vw; }
    .zen-active-task { flex-direction: column; min-width: auto; width: 90%; padding: 30px; text-align: center; border-radius: 40px; }
    .zen-timer { margin: 0; font-size: 3rem; }
    
    .calendar-wrapper { grid-template-columns: repeat(7, 1fr); gap: 4px; }
}
